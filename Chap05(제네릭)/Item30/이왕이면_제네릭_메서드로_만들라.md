# ì´ì™•ì´ë©´ ì œë„¤ë¦­ ë©”ì„œë“œë¡œ ë§Œë“¤ë¼

## ì„œë¡ 

- í´ë˜ìŠ¤ë¿ë§Œ ì•„ë‹ˆë¼ ë©”ì„œë“œë„ ì œë„¤ë¦­í™”ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ëŒ€í‘œì ì¸ ì˜ˆë¡œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ì •ì  ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ(**Collections**ì˜ ì•Œê³ ë¦¬ì¦˜ ë©”ì„œë“œ `binarySearch`, `sort` ...)ì´ ë³´í†µ ì œë„¤ë¦­ ë©”ì„œë“œì…ë‹ˆë‹¤.

```java
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    list.sort(null);
}

public static <T> int binarySearch(List<? extends Comparable<? super T>> list, T key) {
    if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)
        return Collections.indexedBinarySearch(list, key);
    else
        return Collections.iteratorBinarySearch(list, key);
}
```

- ê·¸ë ‡ë‹¤ë©´ ì œë„¤ë¦­ ë©”ì„œë“œ ì‘ì„±ë²•ì„ í•œë²ˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## ì˜ëª»ëœ ë©”ì„œë“œ

```java
public static Set union(Set s1, Set s2) {
	Set result = new HashSet(s1);
	result.addAll(s2);
	return result;
}
```

- ìœ„ì˜ ë©”ì„œë“œì²˜ëŸ¼ í•©ì§‘í•©ì´ ìˆë‹¤ê³  í–ˆì„ë•Œ ì»´íŒŒì¼ì„ í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²½ê³ ê°€ ë°œìƒí•œë‹¤.

```java
warning: [unchecked] unchecked call to
....
```

- ì´ ê²½ê³ ëŠ” ê°„ë‹¨í•˜ê²Œ ë§í•˜ìë©´ íƒ€ì…ì„ ì•ˆì „í•˜ê²Œ ë§Œë“¤ë¼ëŠ” ì´ì•¼ê¸°ì´ë‹¤.
- ì¦‰, ë©”ì„œë“œ ì„ ì–¸ì—ì„œ `Set`ì˜ ì›ì†Œ íƒ€ì…ì„ **íƒ€ì… ë§¤ê°œë³€ìˆ˜**ë¡œ ëª…ì‹œí•˜ê³ , ë©”ì„œë“œ ì•ˆì—ì„œë„ **íƒ€ì… ë§¤ê°œë³€ìˆ˜**ë§Œ ì‚¬ìš©í•˜ê²Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.

### ìˆ˜ì •

```java
public static <E> Set<E> union(Set<E> s1, Set<E> s2) {
	Set<E> result = new HashSet<>(s1);
	result.addAll(s2);
	return result;
}
```

- ìœ„ì˜ ì½”ë“œëŠ” 3ê°œì˜ `Set`ì´ ëª¨ë‘ íƒ€ì…ì´ ê°™ì•„ì•¼ í•œë‹¤.
- ì•„ì´í…œ 31ì—ì„œ ì„¤ëª…í•œ **í•œì •ì  ì™€ì¼ë“œì¹´ë“œ íƒ€ì…(`<? extends Person>`)** ì„ ì‚¬ìš©í•˜ë©´ ë” ìœ ì—°í•˜ê²Œ ê°€ëŠ¥í•˜ê¸°ë„ í•˜ë‹¤.

## ì œë„¤ë¦­ ë©”ì„œë“œì˜ ì •ì˜

```java
public static <T> Box<T> getBox(T o) { ...}
```

---

## ë¶ˆë³€ ê°ì²´ë¥¼ ì—¬ëŸ¬ íƒ€ì…ìœ¼ë¡œ í™œìš©

- ì•„ì´í…œ 28ì—ì„œ ë´¤ë“¯ì´ **ëŸ°íƒ€ì„ì— íƒ€ì… ì •ë³´ê°€ ì†Œê±°**ë˜ë¯€ë¡œ í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ì–´ë–¤ íƒ€ì…ìœ¼ë¡œë“  ë§¤ê°œë³€ìˆ˜í™”í•  ìˆ˜ ìˆë‹¤.
- ê·¸ëŸ¬ë‚˜ ìš”ì²­í•œ íƒ€ì… ë§¤ê°œ ë³€ìˆ˜ì— ë§ê²Œ ë§¤ë²ˆ ê·¸ ê°ì²´ì˜ íƒ€ì…ì„ ë°”ê¿”ì£¼ëŠ” ì •ì  íŒ©í„°ë¦¬ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- ì´ íŒ¨í„´ì„ ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ©í„°ë¦¬ë¼ í•œë‹¤

> **ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ©í„°ë¦¬**
> 

## **ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ©í† ë¦¬ë€?**

```java
public class GenericFactoryMethod {
public static final Set EMPTY_SET = new HashSet();

    public static final <T> Set<T> emptySet() {
        return (Set<T>) EMPTY_SET;
    }
}
```

- ì œë„¤ë¦­ìœ¼ë¡œ íƒ€ì…ì„¤ì • ê°€ëŠ¥í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‘ê³ , ë°˜í™˜ ì‹œì— ì œë„¤ë¦­ìœ¼ë¡œ ë°›ì€ íƒ€ì…ì„ ì´ìš©í•´ íƒ€ì…ì„ ê²°ì •í•˜ëŠ” ê²ƒì´ë‹¤.

### **ì˜ˆì œ ì½”ë“œ**

```java
@Test
public void genericTest() {
    Set<String> set = GenericFactoryMethod.emptySet();
    Set<Integer> set2 = GenericFactoryMethod.emptySet();
    Set<Elvis> set3 = GenericFactoryMethod.emptySet();

    set.add("ab");
    set2.add(123);
    set3.add(Elvis.INSTANCE);

    String s = set.toString();
    System.out.println("s = " + s);
}
```

- ìœ„ì™€ ê°™ì´ ì—¬ëŸ¬ íƒ€ì…ìœ¼ë¡œ ë‚´ë¶€ ê°ì²´ë¥¼ ë°›ì•„ë„ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
- í° ìœ ì—°ì„±ì„ ì œê³µí•œë‹¤.

**ê²°ê³¼**

```java
s = [ab, item3.Elvis@3439f68d, 123]
```

> ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ©í„°ë¦¬ê°€ ì•„ë‹ˆë¼, ê³ ì •ëœ íƒ€ì…ìœ¼ë¡œ ìƒì„±í–ˆë‹¤ë©´ ì—ëŸ¬ê°€ ë‚¬ì„ ê²ƒì´ë‹¤.
> 

---

## í•­ë“± í•¨ìˆ˜ (identity function)
â†’ ì…ë ¥ ê°’ì„ ìˆ˜ì • ì—†ì´ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ëŠ” íŠ¹ë³„í•œ í•¨ìˆ˜

- ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ Function.identityë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- ê·¸ëŸ¬ë‚˜ ê³µë¶€ ëª©ì ìœ¼ë¡œ í•œë²ˆ ë§Œë“¤ì–´ ë³´ì.
- **í•­ë“±í•¨ìˆ˜ ê°ì²´ëŠ” ìƒíƒœê°€ ì—†ìœ¼ë‹ˆ, ì‹±ê¸€í„´ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ë‹¤.**
ìë°”ì˜ ì œë„¤ë¦­ì´ ì‹¤ì²´í™”ëœë‹¤ë©´ í•­ë“±í•¨ìˆ˜ë¥¼ íƒ€ì…ë³„ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ì§€ë§Œ, 
ì†Œê±°ê°€ ë˜ê¸° ë–„ë¬¸ì— ì œë„¤ë¦­ ì‹±ê¸€í„´ í•˜ë‚˜ë§Œ ì¶©ë¶„í•˜ë‹¤.

```java
public static UnaryOperator<Object> IDENTITY_FN = (t) -> t;

@SuppressWarnings("unchecked") // ë¹„ê²€ì‚¬ í˜•ë³€í™˜ ê²½ê³  ë°©ì§€
public static <T> UnaryOperator<T> identiyFunction() {
	return (UnaryOperator<T>) IDENTITY_FN;
```

- ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ë©´ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public static void main(String[] args) {
        String[] strings = { "ì‚¼ë² ", "ëŒ€ë§ˆ", "ë‚˜ì¼ë¡ " };
        UnaryOperator<String> sameString = identityFunction();
        for (String s : strings)
            System.out.println(sameString.apply(s));

        Number[] numbers = { 1, 2.0, 3L };
        UnaryOperator<Number> sameNumber = identityFunction();
        for (Number n : numbers)
            System.out.println(sameNumber.apply(n));
    }
```

---

## ì¬ê·€ì  íƒ€ì… í•œì •(recursive type bound)
â†’ `<T extends Comparable<T>>`

- ë“œë¬¸ ê²½ìš°ì´ì§€ë§Œ, ìê¸° ìì‹ ì´ ë“¤ì–´ê°„ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì˜ í—ˆìš© ë²”ìœ„ë¥¼ í•œì •í•  ìˆ˜ ìˆë‹¤. 
ê·¸ê²ƒì´ ë°”ë¡œ ì¬ê·€ì  íƒ€ì… í•œì •ì´ë‹¤.
- ì¬ê·€ì  íƒ€ì… í•œì •ì„ ì´ìš©í•´ ìƒí˜¸ ë¹„êµí•  ìˆ˜ ìˆìŒì„ í‘œí˜„í–ˆë‹¤
íƒ€ì…í•œì •ì¸ **<E extends Comparable<E>>** ëŠ” **â€œëª¨ë“  íƒ€ì… EëŠ” ìì‹ ê³¼ ë¹„êµí•  ìˆ˜ ìˆë‹¤â€**
- ì£¼ë¡œ **Comparable** ì¸í„°í˜ì´ìŠ¤ì™€ ê°™ì´ ì‚¬ìš©ëœë‹¤.
    - ì—¬ê¸°ì„œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ **T**ëŠ” **Comparable<T>** ë¥¼ êµ¬í˜„í•œ íƒ€ì…ì´ ë¹„êµí•  ìˆ˜ ìˆëŠ” ì›ì†Œì˜ íƒ€ì…ì„ ì •ì˜í•œë‹¤
    - ì‹¤ì œë¡œ ê±°ì˜ ëª¨ë“  íƒ€ì…ì€ ìì‹ ê³¼ ê°™ì€ íƒ€ì…ì˜ ì›ì†Œì™€ë§Œ ë¹„êµí•  ìˆ˜ ìˆë‹¤
    ë”°ë¼ì„œ `String` ì€ `Comparable<String>`ì„ êµ¬í˜„í•˜ê³ ,
    `Integer`ëŠ” `Comparable<Integer>`ë¥¼ êµ¬í˜„í•˜ëŠ” ì‹ì´ë‹¤.

```java
public interface Comparable<T> {
	int compareTo(T o);
}
```

- ì¬ê·€ì  íƒ€ì… í•œì •ì„ ì´ìš©í•´ ìƒí˜¸ ë¹„êµê°€ ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

```java
public static <E extends Comparable<E>> E max(Collection<E> c);
```

- ì´í›„ì— ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ìµœëŒ€ê°’ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
public static <E extends Comparable<E>> Optional<E> max(Collection<E> collection) {
      if (collection.isEmpty())
          return Optional.empty();

      E result = null;

      for (E e : collection) {
          if (result == null || e.compareTo(result) > 0) {
              result = Objects.requireNonNull(e);
          }
      }

      return Optional.of(result);
  }

  public static void main(String[] args) {
      List<Integer> list = List.of(2, 14, 5, 11, 3);
      int result = max(list).orElseGet(null);
      System.out.println("result = " + result);
  }
```

- ë³µì¡í•˜ê¸´ í•˜ì§€ë§Œ, ê´€ìš©êµ¬, ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©í•œ ë³€í˜•(ì•„ì´í…œ 31), ì‹œë®¬ë ˆì´íŠ¸í•œ ì…€í”„ íƒ€ì… ê´€ìš©êµ¬(ì•„ì´í…œ2)ë¥¼ ì´í•´í•˜ë©´ ì¬ê·€ì  íƒ€ì… í•œì •ì€ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## í•µì‹¬ì •ë¦¬

<aside>

ğŸ“Œ **ë°˜í™˜ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ í˜•ë³€í™˜í•´ì•¼ í•˜ëŠ” ë©”ì„œë“œë³´ë‹¤ `ì œë„¤ë¦­ ë©”ì„œë“œ`ê°€ í›¨ì”¬ ì•ˆì „í•˜ê³  ì‚¬ìš©í•˜ê¸°ë„ ì‰½ë‹¤.
í˜•ë³€í™˜ì€ ì¢‹ì§€ ì•Šìœ¼ë‹ˆ ì œë„¤ë¦­ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ë©´ ë¬´ì¡°ê±´ ì œë„¤ë¦­ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.**

</aside>